# Windows PowerShell BuildFarm

Скрипт, позволяющий модифицировать WIM образ системы.

## Параметры

- `-AddPackages` `-AP`  
  Добавление `.cab` или `.msu` файлов в Windows WIM.
- `-AddDrivers` `-AD`  
  Добавление драйверов в Windows WIM.
- `-ResetBase` `-RB`  
  Уменьшение размера хранилища компонентов Windows WIM, путём удаления предыдущих версий компонентов.
- `-ScanHealth` `-SH`  
  Сканирование образа Windows WIM на предмет повреждения хранилища компонентов.
- `-SaveImage` `-SI`  
  Сохранение изменений в Windows WIM.
- `-ExportToESD` `-ESD`  
  Экспорт WIM файла в ESD формат.

## Директории

- `BuildFarm`
  - `Apps` - Приложения.
  - `Drivers` - Хранилище драйверов.
  - `ISO` - ISO образа системы.
  - `Logs` - Логи работы скрипта.
  - `Mount` - Директория для монтирования Windows WIM.
  - `Temp` - Директория для временных файлов.
  - `Updates` - Хранилище обновлений.
  - `WIM` - Директория расположения WIM файла.

## Синтаксис

```
build.ps1 -AP -AD -RB -SH -SI
```

1. Интегрировать обновления (`-AP`) и драйверы (`-AD`) в образ системы.
2. Уменьшить размер хранилища компонентов (`-RB`).
3. Запустить сканирование образа на предмет повреждения хранилища компонентов (`-SH`).
4. Сохранить все изменения (`-SI`).

```
build.ps1 -AP -RB -SH -SI
```

1. Интегрировать обновления в образ системы (`-AP`).
2. Уменьшить размер хранилища компонентов (`-RB`).
3. Запустить сканирование образа на предмет повреждения хранилища компонентов (`-SH`).
4. Сохранить все изменения (`-SI`).

```
build.ps1 -AP -RB -SH -SI -ESD
```

1. Интегрировать обновления (`-AP`).
2. Уменьшить размер хранилища компонентов (`-RB`).
3. Запустить сканирование образа на предмет повреждения хранилища компонентов (`-SH`).
4. Сохранить все изменения (`-SI`).
5. Экспортировать WIM файл в ESD формат (`-ESD`).
